local UI_Module = {}

local TweenService = game:GetService("TweenService")

function UI_Module.CreateMain(titleText)
	local ScreenGui = Instance.new("ScreenGui")
	ScreenGui.Name = "CustomGUI"
	ScreenGui.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
	ScreenGui.ResetOnSpawn = false

	-- Главный фрейм
	local MainFrame = Instance.new("Frame")
	MainFrame.Name = "MainFrame"
	MainFrame.Size = UDim2.new(0, 600, 0, 400)
	MainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
	MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	MainFrame.BorderSizePixel = 0
	MainFrame.Parent = ScreenGui

	local UICorner = Instance.new("UICorner")
	UICorner.CornerRadius = UDim.new(0, 10)
	UICorner.Parent = MainFrame

	-- Боковая панель (Слева)
	local Sidebar = Instance.new("ScrollingFrame")
	Sidebar.Name = "Sidebar"
	Sidebar.Size = UDim2.new(0, 150, 1, -20)
	Sidebar.Position = UDim2.new(0, 10, 0, 10)
	Sidebar.BackgroundTransparency = 1
	Sidebar.ScrollBarThickness = 2
	Sidebar.CanvasSize = UDim2.new(0, 0, 0, 0)
	Sidebar.Parent = MainFrame

	local SidebarLayout = Instance.new("UIListLayout")
	SidebarLayout.Padding = UDim.new(0, 5)
	SidebarLayout.Parent = Sidebar

	-- Контейнер для страниц (Справа)
	local PagesContainer = Instance.new("Frame")
	PagesContainer.Name = "PagesContainer"
	PagesContainer.Size = UDim2.new(1, -180, 1, -20)
	PagesContainer.Position = UDim2.new(0, 170, 0, 10)
	PagesContainer.BackgroundTransparency = 1
	PagesContainer.Parent = MainFrame

	local pages = {}

	-- Функция создания страницы
	function UI_Module:CreatePage(name)
		local PageFrame = Instance.new("ScrollingFrame")
		PageFrame.Name = name .. "_Page"
		PageFrame.Size = UDim2.new(1, 0, 1, 0)
		PageFrame.BackgroundTransparency = 1
		PageFrame.Visible = false
		PageFrame.ScrollBarThickness = 4
		PageFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
		PageFrame.Parent = PagesContainer

		local PageLayout = Instance.new("UIListLayout")
		PageLayout.Padding = UDim.new(0, 10)
		PageLayout.SortOrder = Enum.SortOrder.LayoutOrder
		PageLayout.Parent = PageFrame
		
		-- Авто-размер Canvas
		PageLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
			PageFrame.CanvasSize = UDim2.new(0, 0, 0, PageLayout.AbsoluteContentSize.Y + 20)
		end)

		-- Заголовок страницы (равен названию кнопки)
		local Title = Instance.new("TextLabel")
		Title.Size = UDim2.new(1, 0, 0, 40)
		Title.BackgroundTransparency = 1
		Title.Text = name
		Title.TextColor3 = Color3.fromRGB(255, 255, 255)
		Title.TextSize = 24
		Title.Font = Enum.Font.GothamBold
		Title.TextXAlignment = Enum.TextXAlignment.Left
		Title.Parent = PageFrame

		-- Кнопка в сайдбаре
		local NavButton = Instance.new("TextButton")
		NavButton.Size = UDim2.new(1, -10, 0, 35)
		NavButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		NavButton.Text = name
		NavButton.TextColor3 = Color3.fromRGB(200, 200, 200)
		NavButton.Font = Enum.Font.Gotham
		NavButton.TextSize = 14
		NavButton.Parent = Sidebar

		local btnCorner = Instance.new("UICorner")
		btnCorner.CornerRadius = UDim.new(0, 6)
		btnCorner.Parent = NavButton

		NavButton.MouseButton1Click:Connect(function()
			for _, p in pairs(PagesContainer:GetChildren()) do p.Visible = false end
			PageFrame.Visible = true
		end)

		local pageFunctions = {}

		-- 1. Текст с кнопкой справа
		function pageFunctions:AddButtonRow(text, btnText, callback)
			local Row = Instance.new("Frame")
			Row.Size = UDim2.new(1, -10, 0, 40)
			Row.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
			Row.Parent = PageFrame

			Instance.new("UICorner", Row).CornerRadius = UDim.new(0, 6)

			local Label = Instance.new("TextLabel")
			Label.Size = UDim2.new(0.7, -10, 1, 0)
			Label.Position = UDim2.new(0, 10, 0, 0)
			Label.BackgroundTransparency = 1
			Label.Text = text
			Label.TextColor3 = Color3.fromRGB(230, 230, 230)
			Label.Font = Enum.Font.Gotham
			Label.TextXAlignment = Enum.TextXAlignment.Left
			Label.Parent = Row

			local ActionBtn = Instance.new("TextButton")
			ActionBtn.Size = UDim2.new(0.3, -10, 0.7, 0)
			ActionBtn.Position = UDim2.new(0.7, 5, 0.15, 0)
			ActionBtn.BackgroundColor3 = Color3.fromRGB(60, 120, 255)
			ActionBtn.Text = btnText
			ActionBtn.TextColor3 = Color3.new(1, 1, 1)
			ActionBtn.Parent = Row
			Instance.new("UICorner", ActionBtn)

			ActionBtn.MouseButton1Click:Connect(callback)
		end

		-- 2. Текст с кнопкой + Scrolling Frame снизу
		function pageFunctions:AddComplexRow(text, btnText, scrollHeight, callback)
			local Container = Instance.new("Frame")
			Container.Size = UDim2.new(1, -10, 0, 50 + scrollHeight)
			Container.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
			Container.Parent = PageFrame
			Instance.new("UICorner", Container)

			local TopPart = Instance.new("Frame")
			TopPart.Size = UDim2.new(1, 0, 0, 40)
			TopPart.BackgroundTransparency = 1
			TopPart.Parent = Container

			local Label = Instance.new("TextLabel")
			Label.Size = UDim2.new(0.7, -10, 1, 0)
			Label.Position = UDim2.new(0, 10, 0, 0)
			Label.BackgroundTransparency = 1
			Label.Text = text
			Label.TextColor3 = Color3.fromRGB(230, 230, 230)
			Label.Font = Enum.Font.Gotham
			Label.TextXAlignment = Enum.TextXAlignment.Left
			Label.Parent = TopPart

			local ActionBtn = Instance.new("TextButton")
			ActionBtn.Size = UDim2.new(0.3, -10, 0.7, 0)
			ActionBtn.Position = UDim2.new(0.7, 5, 0.15, 0)
			ActionBtn.BackgroundColor3 = Color3.fromRGB(60, 200, 120)
			ActionBtn.Text = btnText
			ActionBtn.Parent = TopPart
			Instance.new("UICorner", ActionBtn)

			local InnerScroll = Instance.new("ScrollingFrame")
			InnerScroll.Size = UDim2.new(1, -20, 0, scrollHeight - 10)
			InnerScroll.Position = UDim2.new(0, 10, 0, 45)
			InnerScroll.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
			InnerScroll.BorderSizePixel = 0
			InnerScroll.ScrollBarThickness = 2
			InnerScroll.Parent = Container
			Instance.new("UICorner", InnerScroll)
			
			local InnerLayout = Instance.new("UIListLayout")
			InnerLayout.Padding = UDim.new(0, 2)
			InnerLayout.Parent = InnerScroll

			ActionBtn.MouseButton1Click:Connect(function() callback(InnerScroll) end)
			
			return InnerScroll
		end

		-- 3. Обычный текст
		function pageFunctions:AddLabel(text)
			local Label = Instance.new("TextLabel")
			Label.Size = UDim2.new(1, -10, 0, 30)
			Label.BackgroundTransparency = 1
			Label.Text = text
			Label.TextColor3 = Color3.fromRGB(180, 180, 180)
			Label.Font = Enum.Font.Gotham
			Label.TextSize = 14
			Label.TextWrapped = true
			Label.TextXAlignment = Enum.TextXAlignment.Left
			Label.Parent = PageFrame
		end

		return pageFunctions
	end

	return UI_Module
end

return UI_Module
